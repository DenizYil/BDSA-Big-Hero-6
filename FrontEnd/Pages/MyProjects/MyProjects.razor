@page "/myprojects/{UserId}"
@using Components.ProjectCard;
@using Models.Project

@inject HttpClient client


<PageTitle>Projects - CoProject</PageTitle>
<h1>My Projects</h1>
<hr/>
<h2>Below you can see a list of available projects.</h2>

<div class="search">
    <input id="search-bar" placeholder="Search..." name="searchinput">
    <img class="searchIcon" src="/images/searchicon.svg" alt="Search icon">
</div>

@if (_projects == null)
{
    <p>Loading...</p>
}
else
{
    @if (!_projects.Any())
    {
        <p>You somehow have no projects</p>
    }
    else
    {
        <div class="projects">

            @foreach (var project in _projects)
            {
                <ProjectCard Project="@project"/>
            }
        </div>
    }
}

<div class="createProject">
    <a href="/createproject">
        <button>Create new project</button>
    </a>
</div>

@code {
    private string? UserId { get; set; } = string.Empty;
    private IEnumerable<ProjectDetailsDTO>? _projects;

    protected override async Task OnInitializedAsync()
    {
        _projects = await client.GetFromJsonAsync<IEnumerable<ProjectDetailsDTO>>($"api/users/projects/{UserId}");
    }
}